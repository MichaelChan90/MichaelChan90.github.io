<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="Michael Chan"><meta name="copyright" content="Michael Chan"><meta name="generator" content="Hexo 6.3.0"><meta name="theme" content="hexo-theme-yun"><title>MySQLå¤‡ä»½ä¹‹ercona-xtrabackup | MichaelChan Blog</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/star-markdown-css@0.4.1/dist/yun/yun-markdown.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/prism-theme-vars/base.css"><script src="https://fastly.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="mask-icon" href="/favicon.svg" color="#0078E7"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="preconnect" href="https://fastly.jsdelivr.net/npm/" crossorigin><script id="yun-config">
    window.Yun = {}
    window.CONFIG = {"hostname":"michaelchan90.github.io","root":"/","title":"æ˜Ÿæ— å°˜çš„åšå®¢","version":"1.10.9","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"æœç´¢...","empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹: ${query}","hits":"æ‰¾åˆ° ${hits} æ¡ç»“æœ","hits_time":"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰"},"anonymous_image":"https://cdn.yunyoujun.cn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"local_search":{"path":"/search.xml"},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"fireworks":{"colors":null},"vendors":{"host":"https://fastly.jsdelivr.net/npm/","darken":"https://fastly.jsdelivr.net/npm/darken@1.5.0"}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/hexo-theme-yun.js" type="module"></script><link rel="preconnect" href="https://www.google-analytics.com" crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=UA-164931119-1"></script><script>if (CONFIG.hostname === location.hostname) {
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-164931119-1');
}</script><script data-ad-client="ca-pub-9775647830683925" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(function(){
  var bp = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https') {
    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else {
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})();</script><meta name="description" content="å‡†å¤‡ä¸‹è½½åœ°å€ï¼š xtrabackup 8.0 EL7ç‰ˆæœ¬ï¼šhttps:&#x2F;&#x2F;downloads.percona.com&#x2F;downloads&#x2F;Percona-XtraBackup-8.0&#x2F;Percona-XtraBackup-8.0.32-25&#x2F;binary&#x2F;redhat&#x2F;7&#x2F;x86_64&#x2F;percona-xtrabackup-80-8.0.32-25.1.el7.x86_64.rpm xtrabac">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQLå¤‡ä»½ä¹‹ercona-xtrabackup">
<meta property="og:url" content="http://michaelchan90.github.io/2023/02/25/MySQL%E5%A4%87%E4%BB%BD%E4%B9%8Bercona-xtrabackup/index.html">
<meta property="og:site_name" content="MichaelChan Blog">
<meta property="og:description" content="å‡†å¤‡ä¸‹è½½åœ°å€ï¼š xtrabackup 8.0 EL7ç‰ˆæœ¬ï¼šhttps:&#x2F;&#x2F;downloads.percona.com&#x2F;downloads&#x2F;Percona-XtraBackup-8.0&#x2F;Percona-XtraBackup-8.0.32-25&#x2F;binary&#x2F;redhat&#x2F;7&#x2F;x86_64&#x2F;percona-xtrabackup-80-8.0.32-25.1.el7.x86_64.rpm xtrabac">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-02-25T01:43:51.000Z">
<meta property="article:modified_time" content="2023-03-28T03:01:59.670Z">
<meta property="article:author" content="Michael Chan">
<meta name="twitter:card" content="summary"><script>(function() {
  if (CONFIG.mode !== 'auto') return
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const setting = localStorage.getItem('darken-mode') || 'auto'
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
})()</script></head><body><script src="https://code.iconify.design/2/2.1.1/iconify.min.js"></script><script>// Define global variable
IconifyProviders = {
  // Empty prefix: overwrite default API provider configuration
  '': {
    // Use custom API first, use Iconify public API as backup
    resources: [
        'https://api.iconify.design',
    ],
    // Wait for 1 second before switching API hosts
    rotate: 1000,
  },
};</script><script defer src="https://fastly.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js" type="module"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js" type="module"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="æ–‡ç« ç›®å½•"><span class="icon iconify" data-icon="ri:list-ordered"></span></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="ç«™ç‚¹æ¦‚è§ˆ"><span class="icon iconify" data-icon="ri:passport-line"></span></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info mickey-mouse"><a class="site-author-avatar" href="/about/" title="Michael Chan"><img width="96" loading="lazy" src="https://cdn.jsdelivr.net/gh/michaelchan90/blog-imgbed/img/go.jpg" alt="Michael Chan"><span class="site-author-status" title="åˆæ˜¯æ–°çš„ä¸€å¤©">ğŸ¤”</span></a><div class="site-author-name"><a href="/about/">Michael Chan</a></div><a class="site-name" href="/about/site.html">MichaelChan Blog</a><sub class="site-subtitle">æ˜Ÿæ— å°˜</sub><div class="site-description"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="ä¸»é¡µ"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:home-4-line"></span></span></a><div class="site-state-item"><a href="/archives/" title="å½’æ¡£(archives)"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:archive-line"></span></span><span class="site-state-item-count">22</span></a></div><div class="site-state-item"><a href="/categories/" title="åˆ†ç±»(categories)"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:folder-2-line"></span></span><span class="site-state-item-count">20</span></a></div><div class="site-state-item"><a href="/tags/" title="æ ‡ç­¾(tags)"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="site-state-item-count">3</span></a></div></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/michaelchan90" title="GitHub" target="_blank" style="color:#181717"><span class="icon iconify" data-icon="ri:github-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:michaelchan90@outlook.com" title="E-Mail" target="_blank" style="color:#8E71C1"><span class="icon iconify" data-icon="ri:mail-line"></span></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="æˆ‘çš„å°ä¼™ä¼´ä»¬" style="color:dodgerblue"><span class="icon iconify" data-icon="ri:genderless-line"></span></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><span class="icon iconify" data-icon="ri:contrast-2-line"></span></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%87%86%E5%A4%87"><span class="toc-number">1.</span> <span class="toc-text">å‡†å¤‡</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">2.</span> <span class="toc-text">å®‰è£…</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%8A%A5%E9%94%99"><span class="toc-number">2.1.</span> <span class="toc-text">å®‰è£…æŠ¥é”™</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">3.</span> <span class="toc-text">ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD"><span class="toc-number">3.1.</span> <span class="toc-text">åŠŸèƒ½</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E8%AF%A6%E8%A7%A3"><span class="toc-number">3.2.</span> <span class="toc-text">å‚æ•°è¯¦è§£</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E9%87%8F%E5%A4%87%E4%BB%BD"><span class="toc-number">3.3.</span> <span class="toc-text">å…¨é‡å¤‡ä»½</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A2%9E%E9%87%8F%E5%A4%87%E4%BB%BD"><span class="toc-number">3.4.</span> <span class="toc-text">å¢é‡å¤‡ä»½</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B7%AE%E5%BC%82%E5%A4%87%E4%BB%BD"><span class="toc-number">3.5.</span> <span class="toc-text">å·®å¼‚å¤‡ä»½</span></a></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:#0078E7;"><link itemprop="mainEntityOfPage" href="http://michaelchan90.github.io/2023/02/25/MySQL%E5%A4%87%E4%BB%BD%E4%B9%8Bercona-xtrabackup/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="Michael Chan"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="MichaelChan Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">MySQLå¤‡ä»½ä¹‹ercona-xtrabackup</h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-line"></span></span> <time title="åˆ›å»ºæ—¶é—´ï¼š2023-02-25 09:43:51" itemprop="dateCreated datePublished" datetime="2023-02-25T09:43:51+08:00">2023-02-25</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-2-line"></span></span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2023-03-28 11:01:59" itemprop="dateModified" datetime="2023-03-28T11:01:59+08:00">2023-03-28</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="æœ¬æ–‡å­—æ•°"><span class="icon iconify" data-icon="ri:file-word-line"></span></span> <span title="æœ¬æ–‡å­—æ•°">6.3k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="é˜…è¯»æ—¶é•¿"><span class="icon iconify" data-icon="ri:timer-line"></span></span> <span title="é˜…è¯»æ—¶é•¿">34m</span></span></span><span class="post-busuanzi"><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="é˜…è¯»æ¬¡æ•°"><span class="icon iconify" data-icon="ri:eye-line"></span> <span id="busuanzi_value_page_pv"></span></span></span><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><span class="icon iconify" data-icon="ri:folder-line"></span></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">æ•°æ®åº“</span></a></span> > <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">MySQL</span></a></span></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><h1 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h1><p>ä¸‹è½½åœ°å€ï¼š</p>
<p>xtrabackup 8.0 EL7ç‰ˆæœ¬ï¼š<a target="_blank" rel="noopener" href="https://downloads.percona.com/downloads/Percona-XtraBackup-8.0/Percona-XtraBackup-8.0.32-25/binary/redhat/7/x86_64/percona-xtrabackup-80-8.0.32-25.1.el7.x86_64.rpm">https://downloads.percona.com/downloads/Percona-XtraBackup-8.0/Percona-XtraBackup-8.0.32-25/binary/redhat/7/x86_64/percona-xtrabackup-80-8.0.32-25.1.el7.x86_64.rpm</a></p>
<p>xtrabackup 8.0 EL8ç‰ˆæœ¬ï¼š<a target="_blank" rel="noopener" href="https://downloads.percona.com/downloads/Percona-XtraBackup-8.0/Percona-XtraBackup-8.0.32-25/binary/redhat/8/x86_64/percona-xtrabackup-80-8.0.32-25.1.el8.x86_64.rpm">https://downloads.percona.com/downloads/Percona-XtraBackup-8.0/Percona-XtraBackup-8.0.32-25/binary/redhat/8/x86_64/percona-xtrabackup-80-8.0.32-25.1.el8.x86_64.rpm</a></p>
<p>xtrabackup 2.4  EL7ç‰ˆæœ¬ï¼š<a target="_blank" rel="noopener" href="https://downloads.percona.com/downloads/Percona-XtraBackup-2.4/Percona-XtraBackup-2.4.27/binary/redhat/7/x86_64/percona-xtrabackup-24-2.4.27-1.el7.x86_64.rpm">https://downloads.percona.com/downloads/Percona-XtraBackup-2.4/Percona-XtraBackup-2.4.27/binary/redhat/7/x86_64/percona-xtrabackup-24-2.4.27-1.el7.x86_64.rpm</a></p>
<p>xtrabackup 2.4  EL8ç‰ˆæœ¬ï¼š<a target="_blank" rel="noopener" href="https://downloads.percona.com/downloads/Percona-XtraBackup-2.4/Percona-XtraBackup-2.4.27/binary/redhat/8/x86_64/percona-xtrabackup-24-2.4.27-1.el8.x86_64.rpm">https://downloads.percona.com/downloads/Percona-XtraBackup-2.4/Percona-XtraBackup-2.4.27/binary/redhat/8/x86_64/percona-xtrabackup-24-2.4.27-1.el8.x86_64.rpm</a></p>
<p>å½“å‰Xtrabackupå­˜åœ¨ä¸¤ä¸ªç‰ˆæœ¬ï¼šXtrabackup 2.4.xä¸8.0.xï¼Œåˆ†åˆ«ç”¨äºå¤‡ä»½MySQL 5.xä¸MySQL 8.0.x ç‰ˆæœ¬ã€‚</p>
<h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æœ¬æ–‡ä½¿ç”¨çš„æ˜¯el7ç‰ˆæœ¬çš„linux</span></span><br><span class="line">rpm -ivh percona-xtrabackup-80-8.0.32-25.1.el7.x86_64.rpm</span><br></pre></td></tr></table></figure>



<h2 id="å®‰è£…æŠ¥é”™"><a href="#å®‰è£…æŠ¥é”™" class="headerlink" title="å®‰è£…æŠ¥é”™"></a>å®‰è£…æŠ¥é”™</h2><blockquote>
<p>warning: percona-xtrabackup-80-8.0.32-25.1.el7.x86_64.rpm: Header V4 RSA&#x2F;SHA256 Signature, key ID 8507efa5: NOKEY<br>error: Failed dependencies:<br>libev.so.4()(64bit) is needed by percona-xtrabackup-80-8.0.32-25.1.el7.x86_64<br>perl(DBD::mysql) is needed by percona-xtrabackup-80-8.0.32-25.1.el7.x86_64<br>perl(Digest::MD5) is needed by percona-xtrabackup-80-8.0.32-25.1.el7.x86_64</p>
</blockquote>
<p>è§£å†³ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1ã€é¦–å…ˆå®‰è£…Perlç›¸å…³çš„åº“</span></span><br><span class="line">yum install perl-DBD-MySQL -y</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2ã€å®‰è£…perl-Digest-MD5</span></span><br><span class="line">yum install perl-Digest-MD5</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3ã€ç„¶åå®‰è£…libev.so.4ï¼Œæ— æ³•ä½¿ç”¨yumå®‰è£…libev.so.4ï¼Œlibev.soå±äºlibev-develä¸‹çš„</span></span><br><span class="line"><span class="comment"># å¯ä»¥ä½¿ç”¨yumå®‰è£…libev-develï¼Œ</span></span><br><span class="line"><span class="comment"># æˆ–è€…ä¸‹è½½rpmåŒ…å®‰è£…:	http://mirror.centos.org/centos/7/extras/x86_64/Packages/libev-devel-4.15-7.el7.x86_64.rpm</span></span><br><span class="line">yum install libev-devel -y</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>æ³¨ï¼šrpmåŒ…æœç´¢<br>1ã€<a target="_blank" rel="noopener" href="https://rpmfind.net/linux/rpm2html/search.php?query=&submit=Search+...&system=&arch=">https://rpmfind.net/linux/rpm2html/search.php?query=&amp;submit=Search+...&amp;system=&amp;arch=</a></p>
<p>2ã€<a target="_blank" rel="noopener" href="https://pkgs.org/">https://pkgs.org/</a></p>
<h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><h2 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h2><blockquote>
<ol>
<li>å…¨é‡å¤‡ä»½</li>
<li>å¢é‡å¤‡ä»½</li>
<li>å‹ç¼©å¤‡ä»½</li>
<li>åŠ å¯†å¤‡ä»½</li>
</ol>
</blockquote>
<h2 id="å‚æ•°è¯¦è§£"><a href="#å‚æ•°è¯¦è§£" class="headerlink" title="å‚æ•°è¯¦è§£"></a>å‚æ•°è¯¦è§£</h2><blockquote>
<p>innobackupex innobackupexæ˜¯xtrabackupçš„è½¯é“¾æ¥ã€‚Innobackupexä»ç„¶æ”¯æŒ2.2ç‰ˆæœ¬æ‰€æœ‰åŠŸèƒ½å’Œè¯­æ³•ï¼Œä½†ç°åœ¨å·²è¢«åºŸå¼ƒï¼Œå¹¶å°†åœ¨ä¸‹ä¸€ä¸ªä¸»è¦ç‰ˆæœ¬ä¸­åˆ é™¤ã€‚ xtrabackup ä¸€ä¸ªç¼–è¯‘çš„CäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå®ƒæä¾›äº†å¤‡ä»½æ•´ä¸ªMySQLæ•°æ®åº“å®ä¾‹çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬MyISAMã€InnoDBå’ŒXtraDBè¡¨ã€‚ xbcrypt ç”¨äºåŠ å¯†å’Œè§£å¯†å¤‡ä»½æ–‡ä»¶çš„å®ç”¨ç¨‹åºã€‚ xbstream å…è®¸æµå’Œä»xbstreamæ ¼å¼æå–æ–‡ä»¶çš„å®ç”¨ç¨‹åºã€‚ xbcloud å®ç”¨ç¨‹åºï¼Œç”¨äºä»&#x2F;åˆ°äº‘ä¸‹è½½å’Œä¸Šä¼ xbstreamå­˜æ¡£çš„å…¨éƒ¨æˆ–éƒ¨åˆ†ã€‚  å¼ºçƒˆæ¨èä½¿ç”¨xtrabackupå·¥å…·è¿›è¡Œæ—¥å¸¸å¤‡ä»½ã€‚</p>
<p>å¸¸ç”¨å‚æ•°å¦‚ä¸‹ï¼š</p>
<p>1ï¼‰â€“backup   æ‰§è¡Œå¤‡ä»½å¿…é¡»çš„é€‰é¡¹ </p>
<p>2ï¼‰â€“target-dir   æŒ‡å®šå¤‡ä»½åˆ°è¯¥ç›®å½•ï¼Œå¦‚æœä¸å­˜åœ¨ç›®å½•ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºï¼ˆæ³¨æ„ä¸èƒ½æ˜¯çº§è”ç›®å½•éƒ½ä¸å­˜åœ¨ï¼‰    </p>
<p>3ï¼‰DSNï¼ˆ-h -P -u -p -Sï¼‰      æŒ‡å®šipï¼Œportï¼Œuserï¼Œpasswordï¼Œsocketç­‰    </p>
<p>4ï¼‰ä»¥ä¸‹ä¸¤ä¸ªå‚æ•°æ§åˆ¶å½“ç³»ç»Ÿä¸­å‡ºç°é•¿äº‹åŠ¡æ—¶xtrabackupæ‰§è¡ŒFTWRLé”çš„è¡Œä¸º</p>
<p>â€“ftwrl-wait-threshold&#x3D;SECONDS ä¾èµ–äºâ€“ftwrl-wait-timeout&#x3D;SECONDSï¼Œé»˜è®¤å€¼60sï¼Œå½“â€“ftwrl-wait-timeout&#x3D;0æ—¶ï¼Œè¯¥å‚æ•°ä¸ç”Ÿæ•ˆ </p>
<p>â€“ftwrl-wait-timeout&#x3D;SECONDS,é»˜è®¤å€¼0ï¼Œè¡¨ç¤ºä¸å…³æ³¨é•¿äº‹åŠ¡ï¼Œç›´æ¥æ‰§è¡ŒFTWRLé”ã€‚å¦‚æœé0ï¼Œè¡¨ç¤ºxtrabackupé€šè¿‡show processlistçš„æ–¹å¼ï¼Œè·å–æ˜¯å¦å­˜åœ¨sqlå·²ç»æ‰§è¡Œè¶…è¿‡â€“ftwrl-wait-threshold çš„å€¼ï¼Œå¦‚æœè¶…è¿‡äº†ï¼Œåˆ™åœ¨æ‰§è¡ŒFTWRLé”ä¹‹å‰ç­‰å¾…â€“ftwrl-wait-timeoutæ—¶é—´ï¼Œå¦‚æœè¯¥sqlæœªæ‰§è¡Œå®Œæˆï¼Œxtrabackupè¿›ç¨‹é€€å‡ºå¤‡ä»½ã€‚å¦‚æœä¸€ä¸ªæ…¢sqlåˆšåˆšå¼€å§‹æ‰§è¡Œï¼Œæ‰§è¡Œæ—¶é—´è¿˜æœªè¶…è¿‡â€“ftwrl-wait-threshold çš„å€¼ï¼Œé‚£ä¹ˆxtrabackupè¿˜æ˜¯ä¼šæ‰§è¡ŒFTWRLé”ï¼Œè¿™æ—¶å€™æ‰§è¡ŒFTWRLè¿˜æ˜¯ä¼šè¢«blockä½ã€‚</p>
<p>5ï¼‰ â€“apply-log-only    å¢é‡å¤‡ä»½æ—¶ï¼Œåœ¨prepareé˜¶æ®µåº”ç”¨redoæ—¥å¿—   </p>
<p>6ï¼‰â€“binlog-info   æ­¤é€‰é¡¹æ§åˆ¶xtrabackupå¤‡ä»½å·¥å…·åº”å¦‚ä½•æ£€ç´¢ä¸å¤‡ä»½å¯¹åº”äºŒè¿›åˆ¶æ—¥å¿—åæ ‡ï¼Œä¸€èˆ¬å¤‡ä»½æ— éœ€æŒ‡å®šè¯¥å‚æ•°ï¼Œé»˜è®¤å³å¯   </p>
<p>OFF: ä¸è·å–binlogåæ ‡ï¼Œä¸ä¼šç”Ÿæˆxtrabackup_binlog_infoæ–‡ä»¶   </p>
<p>ON: éå†binlogæ–‡ä»¶è·å–åæ ‡ï¼Œç”Ÿæˆxtrabackup_binlog_infoæ–‡ä»¶   </p>
<p>LOCKLESS:ç›®å‰åªåœ¨Percona Serverå®ç°ï¼Œå®˜æ–¹MySQLç‰ˆæœ¬ä¸æ”¯æŒè¯¥å€¼   </p>
<p>AUTO:é»˜è®¤å€¼ï¼Œåœ¨ONå’ŒLOCKLESSä¹‹é—´è‡ªåŠ¨é€‰æ‹©ï¼Œä¼˜å…ˆé€‰æ‹©LOCKLESSï¼Œå¦‚æœä¸æ”¯æŒLOCKLESSï¼Œé‚£ä¹ˆé€‰æ‹©ON </p>
<p>7ï¼‰â€“compress   æ­¤é€‰é¡¹å‘Šè¯‰xtrabackupä½¿ç”¨æŒ‡å®šçš„å‹ç¼©ç®—æ³•å‹ç¼©æ‰€æœ‰è¾“å‡ºæ•°æ®ï¼ŒåŒ…æ‹¬äº‹åŠ¡æ—¥å¿—æ–‡ä»¶å’Œå…ƒæ•°æ®æ–‡ä»¶ã€‚ ç›®å‰å”¯ä¸€æ”¯æŒçš„ç®—æ³•æ˜¯quicklzï¼Œ   ç»“æœæ–‡ä»¶å…·æœ‰qpresså­˜æ¡£æ ¼å¼ï¼Œå¦‚*.qpæ ¼å¼    </p>
<p>8ï¼‰â€“compress-threads&#x3D;    æ­¤é€‰é¡¹æŒ‡å®šxtrabackupç”¨äºå¹¶è¡Œæ•°æ®å‹ç¼©çš„å·¥ä½œçº¿ç¨‹æ•°ã€‚ æ­¤é€‰é¡¹é»˜è®¤ä¸º1ã€‚ å¹¶è¡Œå‹ç¼©å¯ä»¥ä¸å¹¶è¡Œæ–‡ä»¶å¤åˆ¶â€“parallelä¸€èµ·ä½¿ç”¨ã€‚    ä¾‹å¦‚ï¼Œ â€“parallel&#x3D;4 â€“compress â€“compress-threads&#x3D;2 å°†åˆ›å»º4ä¸ªI&#x2F;Oçº¿ç¨‹ï¼Œè¿™äº›çº¿ç¨‹å°†è¯»å–æ•°æ®å¹¶å°†å…¶ç®¡é“åˆ°2ä¸ªå‹ç¼©çº¿ç¨‹ã€‚  </p>
<p>9ï¼‰â€“copy-back   å°†å…ˆå‰å¤‡ä»½çš„æ‰€æœ‰æ–‡ä»¶ä»å¤‡ä»½ç›®å½•å¤åˆ¶åˆ°å®ä¾‹çš„æ•°æ®ç›®å½•ã€‚    </p>
<p>10ï¼‰â€“move-back   å°†å…ˆå‰å¤‡ä»½çš„æ‰€æœ‰æ–‡ä»¶ä»å¤‡ä»½ç›®å½•moveåˆ°å®ä¾‹çš„æ•°æ®ç›®å½•ã€‚ </p>
<p>11ï¼‰â€“databases&#x3D;   æ­¤é€‰é¡¹æŒ‡å®šåº”å¤‡ä»½çš„æ•°æ®åº“å’Œè¡¨åˆ—è¡¨ã€‚ è¯¥é€‰é¡¹æ¥å—è¡¨å•â€œdatabasename1[.table_name1]databasename2[.table_name2]â€¦â€çš„åˆ—è¡¨]</p>
<p>12ï¼‰â€“databases-exclude&#x3D;name ä¸åŒ…æ‹¬åŸºäºåç§°çš„æ•°æ®åº“ï¼Œæ“ä½œæ–¹å¼ä¸â€“databasesç›¸åŒï¼Œä½†åŒ¹é…çš„åç§°ä¸åŒ…æ‹¬åœ¨å¤‡ä»½ä¸­ã€‚ è¯·æ³¨æ„ï¼Œæ­¤é€‰é¡¹æ¯”â€“databaseså…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚ </p>
<p>13ï¼‰â€“databases-file&#x3D;   æ­¤é€‰é¡¹æŒ‡å®šæ–‡ä»¶çš„è·¯å¾„ï¼Œè¯¥æ–‡ä»¶åŒ…å«åº”å¤‡ä»½çš„æ•°æ®åº“å’Œè¡¨åˆ—è¡¨ã€‚ è¯¥æ–‡ä»¶å¯ä»¥åŒ…å«è¡¨å•databasename1[.table_name1]çš„åˆ—è¡¨å…ƒç´ ï¼Œæ¯è¡Œä¸€ä¸ªå…ƒç´ ã€‚ </p>
<p>14ï¼‰â€“decompress    è§£å‹.qpæ–‡ä»¶ï¼Œå¯ä»¥è·Ÿâ€“parallelé…åˆä½¿ç”¨ï¼Œé‡‡ç”¨å¤šçº¿ç¨‹è§£å‹ </p>
<p>15ï¼‰â€“defaults-file&#x3D;[MY.CNF]    æŒ‡å®šmy.cnfçš„è·¯å¾„     </p>
<p>16ï¼‰â€“export    ç”¨æ¥æ¢å¤å•ä¸ªè¡¨     </p>
<p>17ï¼‰â€“parallel&#x3D;    é‡‡ç”¨å¤šçº¿ç¨‹å¤‡ä»½ï¼Œå¯ä»¥æ­é…copy-backï¼Œâ€“decompress     </p>
<p>18ï¼‰â€“prepare    åº”ç”¨redloæ—¥å¿—ï¼Œè¾¾åˆ°æ•°æ®ä¸€è‡´æ€§     </p>
<p>19ï¼‰â€“safe-slave-backup å½“æŒ‡å®šæ—¶ï¼Œxtrabackupå°†åœ¨è¿è¡ŒFLUSH TABLES WITH READ LOCKä¹‹å‰åœæ­¢ä»SQLçº¿ç¨‹ï¼Œå¹¶ç­‰å¾…ç›´åˆ°SHOWçŠ¶æ€ä¸­çš„Slave_open_temp_tablesä¸ºé›¶æ‰å¼€å§‹å¤‡ä»½ã€‚  å¦‚æœæ²¡æœ‰æ‰“å¼€çš„ä¸´æ—¶è¡¨ï¼Œå°†è¿›è¡Œå¤‡ä»½ï¼Œå¦åˆ™å°†å¯åŠ¨å’Œåœæ­¢SQLçº¿ç¨‹ï¼Œç›´åˆ°æ²¡æœ‰æ‰“å¼€çš„ä¸´æ—¶è¡¨ã€‚ å¦‚æœSlave_open_temp_tablesåœ¨xtrabackup-safe-slave-backup-timeoutç§’åæ²¡æœ‰å˜ä¸ºé›¶ï¼Œ åˆ™å¤‡ä»½å°†å¤±è´¥ã€‚ å¤‡ä»½å®Œæˆåå°†é‡æ–°å¯åŠ¨ä»SQLçº¿ç¨‹ã€‚è¿™ä¸ªé€‰é¡¹æ˜¯ä¸ºäº†å¤„ç†å¤åˆ¶ä¸´æ—¶è¡¨é—®é¢˜è€Œå®ç°çš„ï¼Œrowæ ¼å¼ä¸å­˜åœ¨è¯¥é—®é¢˜ã€‚    </p>
<p>20ï¼‰â€“slave-info æ­¤é€‰é¡¹åœ¨å¤‡ä»½ä»æœåŠ¡å™¨æ—¶éå¸¸æœ‰ç”¨ã€‚ å®ƒæ‰“å°ä¸»æœåŠ¡å™¨çš„äºŒè¿›åˆ¶æ—¥å¿—ä½ç½®ã€‚ å®ƒè¿˜å°†äºŒè¿›åˆ¶æ—¥å¿—åæ ‡å†™å…¥xtrabackup_slave_infoæ–‡ä»¶ï¼Œä½œä¸ºChange MASTERå‘½ä»¤ã€‚  å¯ä»¥é€šè¿‡xtrabackup_slave_infoæ–‡ä»¶ä¸­çš„äºŒè¿›åˆ¶æ—¥å¿—ä½ç½®çš„CHANGE MASTERå‘½ä»¤æ¥è®¾ç½®æ­¤ä¸»æœåŠ¡å™¨çš„æ–°ä»æœåŠ¡å™¨ã€‚ </p>
<p>21ï¼‰â€“throttle&#x3D;  ç”¨æ¥é™åˆ¶å¸¦å®½ï¼Œé»˜è®¤å¤§å°10MB, å¦‚æœâ€“throttle&#x3D;1è¡¨ç¤ºå¸¦å®½ä¸º10MB&#x2F;S</p>
</blockquote>
<h2 id="å…¨é‡å¤‡ä»½"><a href="#å…¨é‡å¤‡ä»½" class="headerlink" title="å…¨é‡å¤‡ä»½"></a>å…¨é‡å¤‡ä»½</h2><p>1ã€å¤‡ä»½</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºå¤‡ä»½ç›®å½•</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /var/local/mysqlback</span><br><span class="line"><span class="comment"># ä¿®æ”¹ç›®å½•æƒé™</span></span><br><span class="line"><span class="built_in">chown</span> -R mysql:mysql /var/local/mysqlback</span><br><span class="line"><span class="comment"># å…¨é‡å¤‡ä»½</span></span><br><span class="line">innobackupex --user=æ•°æ®åº“è´¦å· --password=<span class="string">&#x27;æ•°æ®åº“å¯†ç &#x27;</span> /var/local/mysqlback</span><br></pre></td></tr></table></figure>



<p>2ã€æ¢å¤</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1ã€æ¨¡æ‹Ÿç ´å</span></span><br><span class="line">systemctl stop mysqld</span><br><span class="line"><span class="comment"># åˆ é™¤æ‰€æœ‰æ•°æ®</span></span><br><span class="line"><span class="built_in">rm</span> -rf /var/lib/mysql/* </span><br><span class="line"><span class="built_in">rm</span> -rf /var/log/mysqld.log</span><br><span class="line"><span class="built_in">rm</span> -rf /var/log/mysql-slow/slow.log</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2ã€å›æ»šäº‹åŠ¡:</span></span><br><span class="line">innobackupex --apply-log /var/local/mysqlback/2023-3-0*</span><br><span class="line"><span class="comment"># å¤‡æ³¨ï¼šä¸ºä»€ä¹ˆä¼šæœ‰å›æ»šè¿™ä¸€é¡¹å‘¢ï¼Ÿä¸ªäººç†è§£æ˜¯ï¼Œå¤‡ä»½å‡ºæ•°æ®æ—¶ï¼Œç±»ä¼¼åœ¨å¤‡ä»½åŒ…å¤–åŠ äº†ä¸€ä¸ª&#x27;é”&#x27;ï¼Œè€Œå›æ»šåˆ™æ˜¯&#x27;å»é”&#x27;çš„è¿‡ç¨‹ï¼Œ&#x27;å»é”&#x27;åæ‰èƒ½æŠŠæ•°æ®æ¢å¤åˆ°åº“ç›®å½•ã€‚è¿™ä¹Ÿæ­£æ˜¯ä¸ºä»€ä¹ˆåœ¨å¯¼å‡ºåŒ…æ—¶è¦åšä¸ªå‹ç¼©å¤‡ä»½ï¼Œåº”ä¸º&#x27;å»é”&#x27;åå¤‡ä»½åŒ…å°±ä¸å®Œæ•´äº†ï¼Œæ‰“åŒ…åæ›´å®‰å…¨ï¼Œå‡å¦‚æ¢å¤å¤±è´¥ï¼Œè¿˜å¯ä»¥æ¢å¤å¤‡ä»½åŒ…ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3ã€æ¢å¤æ•°æ®</span></span><br><span class="line">innobackupex --copy-back /var/local/mysqlback/2023-3-0*</span><br></pre></td></tr></table></figure>



<h2 id="å¢é‡å¤‡ä»½"><a href="#å¢é‡å¤‡ä»½" class="headerlink" title="å¢é‡å¤‡ä»½"></a>å¢é‡å¤‡ä»½</h2><p>1ã€å¤‡ä»½</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é¦–å…ˆå…¨é‡å¤‡ä»½ä¸€æ¬¡</span></span><br><span class="line">innobackupex --user=æ•°æ®åº“è´¦å· --password=<span class="string">&#x27;æ•°æ®åº“å¯†ç &#x27;</span> /xtrabackup/</span><br><span class="line"><span class="comment"># å‡è®¾å…¨é‡ç”Ÿæˆçš„å¤‡ä»½åŒ…ä¸º2023-3-0</span></span><br><span class="line"><span class="comment"># ç¬¬ä¸€æ¬¡å¢é‡å¤‡ä»½</span></span><br><span class="line">innobackupex --user=æ•°æ®åº“è´¦å· --password=<span class="string">&#x27;æ•°æ®åº“å¯†ç &#x27;</span> --incremental /xtrabackup/ --incremental-basedir=/local/mysqlback/2023-3-0</span><br><span class="line"><span class="comment">#ï¼ˆåŸºäºå…¨é‡çš„åŒ…ï¼‰</span></span><br><span class="line"><span class="comment"># å‡è®¾ç¬¬ä¸€æ¬¡å¢é‡ç”Ÿæˆçš„åŒ…ä¸º 2023-3-1 </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬äºŒæ¬¡å¢é‡å¤‡ä»½</span></span><br><span class="line">innobackupex --user=æ•°æ®åº“è´¦å· --password=<span class="string">&#x27;æ•°æ®åº“å¯†ç &#x27;</span> --incremental /xtrabackup/ --incremental-basedir=/local/mysqlback/2023-3-1</span><br><span class="line"><span class="comment">#ï¼ˆåŸºäºç¬¬ä¸€æ¬¡å¢é‡åŒ…ï¼‰</span></span><br><span class="line"><span class="comment"># å‡è®¾ç¬¬äºŒæ¬¡å¢é‡ç”Ÿæˆçš„åŒ…ä¸º 2023-3-2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¬¬ä¸‰æ¬¡å¢é‡å¤‡ä»½</span></span><br><span class="line">innobackupex --user=æ•°æ®åº“è´¦å· --password=<span class="string">&#x27;æ•°æ®åº“å¯†ç &#x27;</span> --incremental /xtrabackup/ --incremental-basedir=/local/mysqlback/2023-3-2</span><br><span class="line"><span class="comment">#ï¼ˆåŸºäºç¬¬äºŒæ¬¡å¢é‡åŒ…ï¼‰</span></span><br><span class="line"><span class="comment"># å‡è®¾ç¬¬ä¸‰æ¬¡å¢é‡ç”Ÿæˆçš„åŒ…ä¸º 2023-3-3</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2ã€æ¢å¤</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é¦–å…ˆå›æ»šå¤‡ä»½åŒ…</span></span><br><span class="line"><span class="comment"># 1. å…ˆå›æ»šå…¨é‡çš„åŒ…</span></span><br><span class="line">innobackupex --apply-log --redo-only /local/mysqlback/2023-3-0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. å›æ»šç¬¬ä¸€æ¬¡å¢é‡åŒ…</span></span><br><span class="line">innobackupex --apply-log --redo-only /local/mysqlback/2023-3-0    --incremental-dir=/local/mysqlback/2023-3-1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. å›æ»šç¬¬äºŒæ¬¡å¢é‡åŒ…</span></span><br><span class="line">innobackupex --apply-log --redo-only /local/mysqlback/2023-3-0    --incremental-dir=/local/mysqlback/2023-3-2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. å›æ»šç¬¬ä¸‰æ¬¡å¢é‡åŒ…</span></span><br><span class="line">innobackupex --apply-log --redo-only /local/mysqlback/2023-3-0    --incremental-dir=/local/mysqlback/2023-3-3</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤‡æ³¨ï¼šæ­¤æ—¶å›æ»šçš„æ‰€æœ‰å¢é‡æ•°æ®éƒ½åˆ°äº†ç¬¬ä¸€æ¬¡å¤‡ä»½çš„å…¨é‡åŒ…é‡Œ  è¿™æ—¶æ•°æ®è¿˜æ²¡æœ‰åˆ°è¾¾åº“æŒ‡å®šç›®å½•</span></span><br><span class="line"><span class="comment"># æ¥ä¸‹æ¥æˆ‘ä»¬è¿›è¡Œæ¢å¤ã€‚</span></span><br><span class="line"><span class="comment">#5. æ¢å¤å›æ»šå¥½çš„ ç¬¬ä¸€æ¬¡å…¨é‡åŒ…</span></span><br><span class="line"></span><br><span class="line">innobackupex --copy-back /xtrabackup/2023-3-0</span><br></pre></td></tr></table></figure>



<h2 id="å·®å¼‚å¤‡ä»½"><a href="#å·®å¼‚å¤‡ä»½" class="headerlink" title="å·®å¼‚å¤‡ä»½"></a>å·®å¼‚å¤‡ä»½</h2><p>1ã€å¤‡ä»½</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1ã€é¦–å…ˆè¿›è¡Œä¸€æ¬¡å®Œå…¨å¤‡ä»½</span></span><br><span class="line">innobackupex --user=æ•°æ®åº“è´¦å· --password=<span class="string">&#x27;æ•°æ®åº“å¯†ç &#x27;</span> /local/mysqlback</span><br><span class="line"><span class="comment"># å‡è®¾å®Œå…¨å¤‡ä»½çš„åŒ…æ˜¯2023-3-0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿›è¡Œç¬¬ä¸€æ¬¡å·®å¼‚å¤‡ä»½</span></span><br><span class="line">innobackupex --user=æ•°æ®åº“è´¦å· --password=<span class="string">&#x27;æ•°æ®åº“å¯†ç &#x27;</span> --incremental /local/mysqlback --incremental-basedir=/local/mysqlback/2023-3-0</span><br><span class="line"><span class="comment"># å‡è®¾ç¬¬ä¸€æ¬¡å·®å¼‚å¤‡ä»½åŒ…æ˜¯2023-3-1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2ã€è¿›è¡Œç¬¬äºŒæ¬¡å·®å¼‚å¤‡ä»½</span></span><br><span class="line">innobackupex --user=æ•°æ®åº“è´¦å· --password=<span class="string">&#x27;æ•°æ®åº“å¯†ç &#x27;</span> --incremental /local/mysqlback --incremental-basedir=/local/mysqlback/2023-3-1  <span class="comment">#è¿˜æ˜¯åŸºäº# ç¬¬ä¸€æ¬¡çš„å…¨å¤‡</span></span><br><span class="line"><span class="comment"># å‡è®¾ç¬¬äºŒæ¬¡å·®å¼‚å¤‡ä»½çš„åŒ…æ˜¯2023-3-2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3ã€è¿›è¡Œç¬¬ä¸‰æ¬¡å·®å¼‚å¤‡ä»½</span></span><br><span class="line">innobackupex --user=æ•°æ®åº“è´¦å· --password=<span class="string">&#x27;æ•°æ®åº“å¯†ç &#x27;</span> --incremental /local/mysqlback --incremental-basedir=/local/mysqlback/2023-3-1  <span class="comment">#è¿˜æ˜¯åŸºäº# ç¬¬ä¸€æ¬¡çš„å…¨å¤‡</span></span><br><span class="line"><span class="comment"># å‡è®¾ç¬¬ä¸‰æ¬¡å·®å¼‚å¤‡ä»½çš„åŒ…æ˜¯2023-3-3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4ã€è¿›è¡Œç¬¬å››æ¬¡å·®å¼‚å¤‡ä»½</span></span><br><span class="line">innobackupex --user=æ•°æ®åº“è´¦å· --password=<span class="string">&#x27;æ•°æ®åº“å¯†ç &#x27;</span> --incremental /local/mysqlback --incremental-basedir=/local/mysqlback/2023-3-1  </span><br><span class="line"><span class="comment"># è¿˜æ˜¯åŸºäº# ç¬¬ä¸€æ¬¡çš„å…¨å¤‡</span></span><br><span class="line"><span class="comment"># å‡è®¾ç¬¬å››æ¬¡å·®å¼‚å¤‡ä»½çš„åŒ…æ˜¯2023-3-4</span></span><br></pre></td></tr></table></figure>



<p>2ã€æ¢å¤</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å‡è®¾æ¢å¤åˆ°ç¬¬ä¸‰æ¬¡å·®å¼‚å¤‡ä»½çš„æ•°æ®</span></span><br><span class="line"><span class="comment"># æˆ‘ä»¬å›æ»šæ—¶å€™åªéœ€è¦å› &#x27;æ»šå®Œå…¨å¤‡ä»½åŒ…&#x27; å’Œ &#x27;ç¬¬ä¸‰æ¬¡å·®å¼‚åŒ…&#x27; å¤‡ä»½å³å¯ã€‚</span></span><br><span class="line"><span class="comment"># 1. å›æ»š</span></span><br><span class="line"><span class="comment"># å›æ»šå…¨é‡å¤‡ä»½åŒ…</span></span><br><span class="line">innobackupex --apply-log --redo-only /xtrabackup/2023-3-0</span><br><span class="line"><span class="comment"># å›æ»šç¬¬ä¸‰æ¬¡å·®å¼‚å¤‡ä»½åŒ…</span></span><br><span class="line">innobackupex --apply-log --redo-only /xtrabackup/2023-3-0 --incremental-dir=/xtrabacku/2023-3-3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.è¿›è¡Œæ¢å¤</span></span><br><span class="line"><span class="comment"># æ¢å¤å›æ»šå¥½çš„ ç¬¬ä¸€æ¬¡å…¨é‡åŒ…</span></span><br><span class="line">innobackupex --copy-back /xtrabackup/2023-3-0</span><br></pre></td></tr></table></figure>





<blockquote>
<p>You can download full text of the license on <a target="_blank" rel="noopener" href="http://www.gnu.org/licenses/gpl-2.0.txt">http://www.gnu.org/licenses/gpl-2.0.txt</a></p>
<p>Usage: [xtrabackup [â€“defaults-file&#x3D;#] â€“backup | xtrabackup [â€“defaults-file&#x3D;#] â€“prepare] [OPTIONS]</p>
<p>Default options are read from the following files in the given order:<br>&#x2F;etc&#x2F;my.cnf &#x2F;etc&#x2F;mysql&#x2F;my.cnf &#x2F;usr&#x2F;etc&#x2F;my.cnf ~&#x2F;.my.cnf<br>The following groups are read: xtrabackup mysqld<br>The following options may be given as the first argument:<br>â€“print-defaults                               Print the program argument list and exit.<br>â€“no-defaults                                   Donâ€™t read default options from any option file, except for login file.<br>â€“defaults-file&#x3D;#                             Only read default options from the given file #.<br>â€“defaults-extra-file&#x3D;#                   Read this file after the global files are read.<br>â€“defaults-group-suffix&#x3D;#              Also read groups with concat(group, suffix)<br>â€“login-path&#x3D;#                                 Read this path from the login file.<br>  -v, â€“version                                   print xtrabackup version information<br>  â€“target-dir&#x3D;name                        destination directory<br>  â€“backup                                        take backup to target-dir<br>  â€“stats                                             calc statistic of datadir (offline mysqld is recommended)<br>  â€“prepare                                       prepare a backup for starting mysql server on the backup.<br>  â€“export                                          create files to import to another database when prepare.<br>  â€“apply-log-only                            stop recovery process not to progress LSN after applying log when prepare.<br>  â€“print-param                                print parameter of mysqld needed for copyback.<br>  â€“use-memory&#x3D;#                          The value is used instead of buffer_pool_size<br>  â€“throttle&#x3D;#                                   limit count of IO operations (pairs of read&amp;write) per second to IOS values (for â€˜â€“backupâ€™)<br>  â€“log[&#x3D;name]                                 Ignored option for MySQL option compatibility<br>  â€“log-copy-interval&#x3D;#                   time interval between checks done by log copying thread in milliseconds (default is 1 second).<br>  â€“extra-lsndir&#x3D;name                    (for â€“backup): save an extra copy of the xtrabackup_checkpoints file in this directory.<br>  â€“incremental-lsn&#x3D;name             (for â€“backup): copy only .ibd pages newer than specified LSN â€˜high:lowâ€™. ##ATTENTION##: If a wrong LSN value is specified, it is impossible to diagnose this, causing the backup to be unusable. Be careful!<br>  â€“incremental-basedir&#x3D;name     (for â€“backup): copy only .ibd pages newer than backup at specified directory.<br>  â€“incremental-dir&#x3D;name              (for â€“prepare): apply .delta files and logfile in the specified directory.<br>  â€“to-archived-lsn&#x3D;#                      Donâ€™t apply archived logs with bigger log sequence number.<br>  â€“tables&#x3D;name                               filtering by regexp for table names.<br>  â€“tables-file&#x3D;name                        filtering by list of the exact database.table name in the file.<br>  â€“databases&#x3D;name                       filtering by list of databases.<br>  â€“databases-file&#x3D;name                 filtering by list of databases in the file.<br>  â€“tables-exclude&#x3D;name                filtering by regexp for table names. Operates the same way as â€“tables, but matched names are excluded from backup. Note that this option has a higher priority than  â€“tables.</p>
<p>  â€“databases-exclude&#x3D;name         Excluding databases based on name, Operates the same way as â€“databases, but matched names are excluded from backup. Note that this option has a higher priority than â€“databases.</p>
<p>  â€“create-ib-logfile                          ** not work for now** creates ib_logfile* also after  â€˜â€“prepareâ€™. ### If you want create ib_logfile*, only re-execute this command in same options. ###</p>
<p>  â€“stream&#x3D;name                              Stream all backup files to the standard output in the specified format. Currently supported formats are â€˜tarâ€™ and â€˜xbstreamâ€™.</p>
<p>  â€“compress[&#x3D;name]                      Compress individual backup files using the specified compression algorithm. Currently the only supported algorithm is â€˜quicklzâ€™. It is also the default algorithm,  i.e. the one used when â€“compress is used without an argument.</p>
<p>  â€“compress-threads&#x3D;#                  Number of threads for parallel data compression. The default value is 1.<br>  â€“compress-chunk-size&#x3D;#             Size of working buffer(s) for compression threads in bytes. The default value is 64K.<br>  â€“encrypt&#x3D;name                              Encrypt individual backup files using the specified encryption algorithm.<br>  â€“encrypt-key&#x3D;name                       Encryption key to use.<br>  â€“encrypt-key-file&#x3D;name                File which contains encryption key to use.<br>  â€“encrypt-threads&#x3D;#                       Number of threads for parallel data encryption. The default value is 1.<br>  â€“encrypt-chunk-size&#x3D;#                 Size of working buffer(S) for encryption threads in bytes. The default value is 64K.<br>  â€“compact                                        Create a compact backup by skipping secondary index pages.<br>  â€“rebuild-indexes                            Rebuild secondary indexes in InnoDB tables after applying the log. Only has effect with â€“prepare.<br>  â€“rebuild-threads&#x3D;#                       Use this number of threads to rebuild indexes in a compact backup. Only has effect with â€“prepare and â€“rebuild-indexes.</p>
<p>  â€“incremental-force-scan              Perform a full-scan incremental backup even in the presence of changed page bitmap data<br>  â€“close-files                                      do not keep files opened. Use at your own risk.<br>  â€“core-file                                         Write core on fatal signals<br>  â€“copy-back                                     Copy all the files in a previously made backup from the backup directory to their original locations.<br>  â€“move-back                                    Move all the files in a previously made backup from the backup directory to the actual datadir location. Use with caution, as it removes backup files.</p>
<p>  â€“galera-info                                    This options creates the xtrabackup_galera_info file which contains the local node state at the time of the backup. Option should be used when performing the backup of Percona-XtraDB-Cluster. Has no effect when backup locks are used to create the backup.</p>
<p>  â€“slave-info                                      This option is useful when backing up a replication slave server. It prints the binary log position and name of the master server. It also writes this information to the â€œxtrabackup_slave_infoâ€ file as a â€œCHANGE MASTERâ€ command. A new slave for this master can be set up by starting a slave server on this backup and issuing a â€œCHANGE MASTERâ€ command with the binary log position saved in the â€œxtrabackup_slave_infoâ€ file.</p>
<p>  â€“no-lock                                           Use this option to disable table lock with â€œFLUSH TABLES WITH READ LOCKâ€. Use it only if ALL your tables are InnoDB and you DO NOT CARE about the binary log position of the backup. This option shouldnâ€™t be used if there are any DDL statements being executed or if any updates are happening on non-InnoDB tables (this includes the system MyISAM tables in the mysql database), otherwise it could lead to an inconsistent backup. If you are considering to use â€“no-lock because your backups are failing to acquire the lock, this could be because of incoming replication events preventing the lock from succeeding. Please try using â€“safe-slave-backup to momentarily stop the replication slave thread, this may help the backup to succeed and you then donâ€™t need to resort to using this option.</p>
<p>  â€“lock-ddl                                          Issue LOCK TABLES FOR BACKUP if it is supported by server at the beginning of the backup to block all DDL operations.</p>
<p>  â€“lock-ddl-timeout&#x3D;#                      If LOCK TABLES FOR BACKUP does not return within given timeout, abort the backup.<br>  â€“lock-ddl-per-table                        Lock DDL for each table before xtrabackup starts the copy phase and until the backup is completed.<br>  â€“backup-lock-timeout&#x3D;#              Timeout in seconds for attempts to acquire metadata locks.<br>  â€“backup-lock-retry-count&#x3D;#        Number of attempts to acquire metadata locks.<br>  â€“dump-innodb-buffer-pool          Instruct MySQL server to dump innodb buffer pool by issuing a SET GLOBAL innodb_buffer_pool_dump_now&#x3D;ON<br>  â€“dump-innodb-buffer-pool-timeout&#x3D;#    This option specifies the number of seconds xtrabackup waits for innodb buffer pool dump to complete<br>  â€“dump-innodb-buffer-pool-pct&#x3D;#         This option specifies the percentage of buffer pool to be dumped </p>
<p>  â€“safe-slave-backup                         Stop slave SQL thread and wait to start backup until Slave_open_temp_tables in â€œSHOW STATUSâ€ is zero. If there are no open temporary tables, the backup will take place, otherwise the SQL thread will be started and stopped until there are no open temporary tables. The backup will fail if Slave_open_temp_tables does not become zero after â€“safe-slave-backup-timeout seconds. The slave SQL thread will be restarted when the backup finishes.</p>
<p>  â€“rsync                                               Uses the rsync utility to optimize local file transfers. When this option is specified, innobackupex uses rsync to copy all non-InnoDB files instead of spawning a separate cp for each file, which can be much faster for servers with a large number of databases or tables.  This option cannot be used together with â€“stream.</p>
<p>  â€“force-non-empty-directories       This option, when specified, makes â€“copy-back or  â€“move-back transfer files to non-empty directories. Note that no existing files will be overwritten. If â€“copy-back or â€“nove-back has to copy a file from the backup directory which already exists in the destination directory, it will still fail with an error.</p>
<p>  â€“no-version-check                           This option disables the version check which is enabled by the â€“version-check option.<br>  â€“tables-compatibility-check           This option enables engine compatibility warning.  (Defaults to on; use â€“skip-tables-compatibility-check to disable.)</p>
<p>  â€“no-backup-locks                             This option controls if backup locks should be used instead of FLUSH TABLES WITH READ LOCK on the backup stage. The option has no effect when backup locks are not supported by the server. This option is enabled by default, disable with â€“no-backup-locks.</p>
<p>  â€“decompress                                    Decompresses all files with the .qp extension in a backup previously made with the â€“compress option.<br>  -u, â€“user&#x3D;name                                This option specifies the MySQL username used when  connecting to the server, if thatâ€™s not the current user. The option accepts a string argument. See mysql â€“help for details.</p>
<p>  -H, â€“host&#x3D;name                                This option specifies the host to use when connecting to the database server with TCP&#x2F;IP.  The option accepts a string argument. See mysql â€“help for details.</p>
<p>  -P, â€“port&#x3D;#                                         This option specifies the port to use when connecting to the database server with TCP&#x2F;IP.  The option accepts a string argument. See mysql â€“help for details.</p>
<p>  -p, â€“password[&#x3D;name]                     This option specifies the password to use when connecting to the database. It accepts a string argument.  See mysql â€“help for details.</p>
<p>  -S, â€“socket&#x3D;name                              This option specifies the socket to use when connecting to the local database server with a UNIX domain socket.  The option accepts a string argument. See mysql â€“help for details.</p>
<p>  â€“incremental-history-name&#x3D;name     This option specifies the name of the backup series stored in the PERCONA_SCHEMA.xtrabackup_history history record to base an incremental backup on. Xtrabackup will search the history table looking for the most recent (highest innodb_to_lsn), successful backup in the series and take the to_lsn value to use as the starting lsn for the incremental backup. This will be mutually exclusive with â€“incremental-history-uuid, â€“incremental-basedir and â€“incremental-lsn. If no valid lsn can be found (no series by that name, no successful backups by that name) xtrabackup will return with an error. It is used with the â€“incremental option.</p>
<p>  â€“incremental-history-uuid&#x3D;name       This option specifies the UUID of the specific history record stored in the PERCONA_SCHEMA.xtrabackup_history to base an incremental backup on. â€“incremental-history-name, â€“incremental-basedir and â€“incremental-lsn. If no valid lsn can be found (no success record with that uuid) xtrabackup will return with an error. It is used with the â€“incremental option.</p>
<p>  â€“decrypt&#x3D;name                                      Decrypts all files with the .xbcrypt extension in a backup previously made with â€“encrypt option.<br>  â€“remove-original                               Remove .qp and .xbcrypt files after decryption and decompression.<br>  â€“ftwrl-wait-query-type&#x3D;name         This option specifies which types of queries are allowed to complete before innobackupex will issue the global lock. Default is all.</p>
<p>  â€“kill-long-query-type&#x3D;name            This option specifies which types of queries should be killed to unblock the global lock. Default is â€œSELECTâ€.<br>  â€“history[&#x3D;name]                                This option enables the tracking of backup history in the PERCONA_SCHEMA.xtrabackup_history table. An optional history series name may be specified that will be placed with the history record for the current backup being taken.</p>
<p>  â€“kill-long-queries-timeout&#x3D;#            This option specifies the number of seconds innobackupex waits between starting FLUSH TABLES WITH READ LOCK and killing those queries that block it. Default is 0 seconds, which means innobackupex will not attempt to kill any queries.</p>
<p>  â€“ftwrl-wait-timeout&#x3D;#                        This option specifies time in seconds that innobackupex should wait for queries that would block FTWRL before running it. If there are still such queries when the timeout expires, innobackupex terminates with an error. Default is 0, in which case innobackupex does not wait for queries to complete and starts FTWRL immediately.</p>
<p>  â€“ftwrl-wait-threshold&#x3D;#                     This option specifies the query run time threshold which is used by innobackupex to detect long-running queries with a non-zero value of â€“ftwrl-wait-timeout. FTWRL is not started until such long-running queries exist. This option has no effect if â€“ftwrl-wait-timeout is 0. Default value is 60 seconds.</p>
<p>  â€“debug-sleep-before-unlock&#x3D;#        This is a debug-only option used by the XtraBackup test suite.<br>  â€“safe-slave-backup-timeout&#x3D;#         How many seconds â€“safe-slave-backup should wait for Slave_open_temp_tables to become zero. (default 300)<br>  â€“binlog-info[&#x3D;name]                           This option controls how XtraBackup should retrieve serverâ€™s binary log coordinates corresponding to the backup. Possible values are OFF, ON, LOCKLESS and AUTO. See the XtraBackup manual for more information</p>
<p>  â€“reencrypt-for-server-id&#x3D;#                Re-encrypt tablespace keys for given server-id.<br>  â€“check-privileges                                 Check database user privileges before performing any query.<br>  â€“read-buffer-size[&#x3D;#]                          Set datafile read buffer size, given value is scaled up to page size. Default is 10Mb.<br>  â€“ssl-mode&#x3D;name                                 SSL connection mode.<br>  â€“ssl                                                         Deprecated. Use â€“ssl-mode instead.  (Defaults to on; use â€“skip-ssl to disable.)<br>  â€“ssl-verify-server-cert                         Deprecated. Use â€“ssl-mode&#x3D;VERIFY_IDENTITY instead.<br>  â€“ssl-ca&#x3D;name                                      CA file in PEM format.<br>  â€“ssl-capath&#x3D;name                              CA directory.<br>  â€“ssl-cert&#x3D;name                                    X509 cert in PEM format.<br>  â€“ssl-cipher&#x3D;name                                SSL cipher to use.<br>  â€“ssl-key&#x3D;name                                     X509 key in PEM format.<br>  â€“ssl-crl&#x3D;name                                       Certificate revocation list.<br>  â€“ssl-crlpath&#x3D;name                               Certificate revocation list path.<br>  â€“tls-version&#x3D;name                               TLS version to use, permitted values are: TLSv1, TLSv1.1, TLSv1.2<br>  â€“server-public-key-path&#x3D;name          File path to the server public RSA key in PEM format.<br>  -h, â€“datadir&#x3D;name                               Path to the database root.<br>  -t, â€“tmpdir&#x3D;name                                 Path for temporary files. Several paths may be specified, separated by a colon (:), in this case they are used in a round-robin fashion.</p>
<p>  â€“parallel&#x3D;#                                            Number of threads to use for parallel datafiles transfer. The default value is 1.<br>  â€“log[&#x3D;name]                                          Ignored option for MySQL option compatibility<br>  â€“log-bin[&#x3D;name]                                   Base name for the log sequence<br>  â€“innodb[&#x3D;name]                                   Ignored option for MySQL option compatibility<br>  â€“innodb-adaptive-hash-index            Enable InnoDB adaptive hash index (enabled by default).  Disable with â€“skip-innodb-adaptive-hash-index.  (Defaults to on; use â€“skip-innodb-adaptive-hash-index to disable.)</p>
<p>  â€“innodb-autoextend-increment&#x3D;#    Data file autoextend increment in megabytes<br>  â€“innodb-buffer-pool-size&#x3D;#                The size of the memory buffer InnoDB uses to cache data and indexes of its tables.<br>  â€“innodb-checksums                              Enable InnoDB checksums validation (enabled by default). Disable with â€“skip-innodb-checksums. (Defaults to on; use â€“skip-innodb-checksums to disable.)</p>
<p>  â€“innodb-data-file-path&#x3D;name             Path to individual files and their sizes.<br>  â€“innodb-data-home-dir&#x3D;name           The common part for InnoDB table spaces.<br>  â€“innodb-doublewrite                            Enable InnoDB doublewrite buffer (enabled by default). Disable with â€“skip-innodb-doublewrite.  (Defaults to on; use â€“skip-innodb-doublewrite to disable.)</p>
<p>  â€“innodb-io-capacity[&#x3D;#]                        Number of IOPs the server can do. Tunes the background IO rate<br>  â€“innodb-file-io-threads&#x3D;#                     Number of file I&#x2F;O threads in InnoDB.<br>  â€“innodb-read-io-threads&#x3D;#                  Number of background read I&#x2F;O threads in InnoDB.<br>  â€“innodb-write-io-threads&#x3D;#                 Number of background write I&#x2F;O threads in InnoDB.<br>  â€“innodb-file-per-table                           Stores each InnoDB table to an .ibd file in the database dir.<br>  â€“innodb-flush-log-at-trx-commit[&#x3D;#]  Set to 0 (write and flush once per second), 1 (write and flush at each commit) or 2 (write at commit, flush once per second).</p>
<p>  â€“innodb-flush-method&#x3D;name              With which method to flush data.<br>  â€“innodb-force-recovery&#x3D;#                    Helps to save your data in case the disk image of the database becomes corrupt.<br>  â€“innodb-log-arch-dir&#x3D;name                  Where full logs should be archived.<br>  â€“innodb-log-buffer-size&#x3D;#                    The size of the buffer which InnoDB uses to write log to the log files on disk.<br>  â€“innodb-log-file-size&#x3D;#                          Size of each log file in a log group.<br>  â€“innodb-log-files-in-group&#x3D;#               Number of log files in the log group. InnoDB writes to the files in a circular fashion. Value 3 is recommended here.</p>
<p>  â€“innodb-log-group-home-dir&#x3D;name    Path to InnoDB log files.<br>  â€“innodb-max-dirty-pages-pct&#x3D;#           Percentage of dirty pages allowed in bufferpool.<br>  â€“innodb-open-files&#x3D;#                             How many files at the maximum InnoDB keeps open at the same time.<br>  â€“innodb-use-native-aio                          Use native AIO if supported on this platform.<br>  â€“innodb-page-size&#x3D;#                              The universal page size of the database.<br>  â€“innodb-log-block-size&#x3D;#                       The log block size of the transaction log file. Changing for created log file is not supported. Use on your own risk!</p>
<p>  â€“innodb-fast-checksum                          Change the algorithm of checksum for the whole of datapage to 4-bytes word based.<br>  â€“innodb-doublewrite-file&#x3D;name           Path to special datafile for doublewrite buffer. (default is : not used)<br>  â€“innodb-buffer-pool-filename&#x3D;name  Filename to&#x2F;from which to dump&#x2F;load the InnoDB buffer pool<br>  â€“debug-sync&#x3D;name                                 Debug sync point. This is only used by the xtrabackup test suite<br>  -#, â€“debug[&#x3D;name]                                  Output debug log. Default all ib_log output to stderr. To redirect all ib_log output to separate file, use â€“debug&#x3D;d,ib_log:o,&#x2F;tmp&#x2F;xtrabackup.trace</p>
<p>  â€“innodb-checksum-algorithm&#x3D;name   The algorithm InnoDB uses for page checksumming. [CRC32, STRICT_CRC32, INNODB, STRICT_INNODB, NONE, STRICT_NONE]</p>
<p>  â€“innodb-log-checksum-algorithm&#x3D;name    The algorithm InnoDB uses for log checksumming. [CRC32, STRICT_CRC32, INNODB, STRICT_INNODB, NONE, STRICT_NONE]</p>
<p>  â€“innodb-undo-directory&#x3D;name              Directory where undo tablespace files live, this path can be absolute.<br>  â€“innodb-undo-tablespaces&#x3D;#                 Number of undo tablespaces to use.<br>  â€“defaults-group&#x3D;name                            defaults group in config file (default â€œmysqldâ€).<br>  â€“open-files-limit&#x3D;#                                    the maximum number of file descriptors to reserve with setrlimit().<br>  â€“redo-log-version&#x3D;#                                 Redo log version of the backup. For â€“prepare only.<br>  â€“server-id&#x3D;#                                              The server instance being backed up<br>  â€“transition-key[&#x3D;name]                           Transition key to encrypt tablespace keys with.<br>  â€“xtrabackup-plugin-dir&#x3D;name                Directory for xtrabackup plugins.<br>  â€“generate-new-master-key                     Generate new master key when doing copy-back.<br>  â€“generate-transition-key                         Generate transition key and store it into keyring.</p>
<p>Variables (â€“variable-name&#x3D;value)  and boolean options {FALSE|TRUE}  Value (after reading options)</p>
<hr>
<p>datadir                                                  &#x2F;opt&#x2F;mysqldata<br>tmpdir                                                   &#x2F;tmp<br>parallel                                                 1<br>log                                                         (No default value)<br>log-bin                                                  (No default value)<br>innodb                                                  (No default value)<br>innodb-adaptive-hash-index            TRUE<br>innodb-autoextend-increment         8<br>innodb-buffer-pool-size                     8388608<br>innodb-checksums                             TRUE<br>innodb-data-file-path                          (No default value)<br>innodb-data-home-dir                        (No default value)<br>innodb-doublewrite                           TRUE<br>innodb-io-capacity                              200<br>innodb-file-io-threads                        4<br>innodb-read-io-threads                     4<br>innodb-write-io-threads                    4<br>innodb-file-per-table                          FALSE<br>innodb-flush-log-at-trx-commit        1<br>innodb-flush-method                          (No default value)<br>innodb-force-recovery                       0<br>innodb-log-arch-dir                            (No default value)<br>innodb-log-buffer-size                      16777216<br>innodb-log-file-size                            50331648<br>innodb-log-files-in-group                  2<br>innodb-log-group-home-dir             (No default value)<br>innodb-max-dirty-pages-pct            75<br>innodb-open-files                              300<br>innodb-use-native-aio                       FALSE<br>innodb-page-size                               16384<br>innodb-log-block-size                        512<br>innodb-fast-checksum                       FALSE<br>innodb-doublewrite-file                    (No default value)<br>innodb-buffer-pool-filename           (No default value)<br>debug-sync                                          (No default value)<br>debug                                                   (No default value)<br>innodb-checksum-algorithm            innodb<br>innodb-log-checksum-algorithm     innodb<br>innodb-undo-directory                      (No default value)<br>innodb-undo-tablespaces                 0<br>defaults-group                                    mysqld<br>open-files-limit                                    0<br>redo-log-version                                 1<br>server-id                                               0<br>xtrabackup-plugin-dir                        (No default value)<br>generate-new-master-key                 FALSE<br>generate-transition-key                     FALSE</p>
<p>Variables (â€“variable-name&#x3D;value) and boolean options {FALSE|TRUE}  Value (after reading options)</p>
<hr>
<p>version                                                FALSE<br>target-dir                                            &#x2F;usr&#x2F;local&#x2F;apache-tomcat-8.5.85&#x2F;lib&#x2F;xtrabackup_backupfiles&#x2F;<br>backup                                                FALSE<br>stats                                                     FALSE<br>prepare                                               FALSE<br>export                                                  FALSE<br>apply-log-only                                    FALSE<br>print-param                                        FALSE<br>use-memory                                      104857600<br>throttle                                                0<br>log                                                       (No default value)<br>log-copy-interval                               1000<br>extra-lsndir                                        (No default value)<br>incremental-lsn                                 (No default value)<br>incremental-basedir                         (No default value)<br>incremental-dir                                 (No default value)<br>to-archived-lsn                                 0<br>tables                                                 (No default value)<br>tables-file                                          (No default value)<br>databases                                         (No default value)<br>databases-file                                  (No default value)<br>tables-exclude                                 (No default value)<br>databases-exclude                         (No default value)<br>create-ib-logfile                               FALSE<br>stream                                              (No default value)<br>compress                                         (No default value)<br>compress-threads                          1<br>compress-chunk-size                     65536<br>encrypt                                             NONE<br>encrypt-key-file                              (No default value)<br>encrypt-threads                             1<br>encrypt-chunk-size                        65536<br>compact                                          FALSE<br>rebuild-indexes                              FALSE<br>rebuild-threads                              1<br>incremental-force-scan                FALSE<br>close-files                                        FALSE<br>copy-back                                        FALSE<br>move-back                                      FALSE<br>galera-info                                      FALSE<br>slave-info                                        FALSE<br>no-lock                                            FALSE<br>lock-ddl                                           FALSE<br>lock-ddl-timeout                           31536000<br>lock-ddl-per-table                         FALSE<br>backup-lock-timeout                    31536000<br>backup-lock-retry-count              0<br>dump-innodb-buffer-pool           FALSE<br>dump-innodb-buffer-pool-timeout   10<br>dump-innodb-buffer-pool-pct             0<br>safe-slave-backup                         FALSE<br>rsync                                                FALSE<br>force-non-empty-directories       FALSE<br>no-version-check                           FALSE<br>tables-compatibility-check           TRUE<br>no-backup-locks                            FALSE<br>decompress                                   FALSE<br>user                                                (No default value)<br>host                                                (No default value)<br>port                                                 0<br>socket                                             &#x2F;opt&#x2F;mysqldata&#x2F;mysql.sock<br>incremental-history-name          (No default value)<br>incremental-history-uuid            (No default value)<br>decrypt                                           NONE<br>remove-original                            FALSE<br>ftwrl-wait-query-type                  ALL<br>kill-long-query-type                     SELECT<br>kill-long-queries-timeout            0<br>ftwrl-wait-timeout                        0<br>ftwrl-wait-threshold                     60<br>debug-sleep-before-unlock         0<br>safe-slave-backup-timeout         300<br>binlog-info                                     auto<br>reencrypt-for-server-id               0<br>check-privileges                           FALSE<br>read-buffer-size                          10485760<br>ssl                                                  TRUE<br>ssl-verify-server-cert                  FALSE<br>ssl-ca                                            (No default value)<br>ssl-capath                                    (No default value)<br>ssl-cert                                         (No default value)<br>ssl-cipher                                     (No default value)<br>ssl-key                                          (No default value)<br>ssl-crl                                            (No default value)<br>ssl-crlpath                                    (No default value)<br>tls-version                                    TLSv1,TLSv1.1,TLSv1.2<br>server-public-key-path              (No default value)</p>
</blockquote>
</div></section><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="æ‰“èµ" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><span class="icon iconify" data-icon="ri:hand-coin-line"></span></span><div id="reward-comment">æ±‚æ‰“èµ</div><div id="qr" style="display:none;"><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/michaelchan90/blog-imgbed/img/AliPay.png"><img loading="lazy" src="https://cdn.jsdelivr.net/gh/michaelchan90/blog-imgbed/img/AliPay.png" alt="æ”¯ä»˜å®" title="æ”¯ä»˜å®"></a><div><span style="color:#00A3EE"><span class="icon iconify" data-icon="ri:alipay-line"></span></span></div></div><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/michaelchan90/blog-imgbed/img/WechatPay.png"><img loading="lazy" src="https://cdn.jsdelivr.net/gh/michaelchan90/blog-imgbed/img/WechatPay.png" alt="å¾®ä¿¡æ”¯ä»˜" title="å¾®ä¿¡æ”¯ä»˜"></a><div><span style="color:#2DC100"><span class="icon iconify" data-icon="ri:wechat-pay-line"></span></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>æœ¬æ–‡ä½œè€…ï¼š</strong>Michael Chan</li><li class="post-copyright-link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="http://michaelchan90.github.io/2023/02/25/MySQL%E5%A4%87%E4%BB%BD%E4%B9%8Bercona-xtrabackup/" title="MySQLå¤‡ä»½ä¹‹ercona-xtrabackup">http://michaelchan90.github.io/2023/02/25/MySQL%E5%A4%87%E4%BB%BD%E4%B9%8Bercona-xtrabackup/</a></li><li class="post-copyright-license"><strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é»˜è®¤é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><span class="icon iconify" data-icon="ri:creative-commons-line"></span><span class="icon iconify" data-icon="ri:creative-commons-by-line"></span><span class="icon iconify" data-icon="ri:creative-commons-nc-line"></span><span class="icon iconify" data-icon="ri:creative-commons-sa-line"></span></a> è®¸å¯åè®®ã€‚</li></ul><script>document.addEventListener('copy', function (event) {
  const clipboardData = event.clipboardData || window.clipboardData;
  if (!clipboardData) { return; }
  const text = window.getSelection().toString();
  if (text) {
    event.preventDefault();
    clipboardData.setData('text/plain', text + '\n\næœ¬æ–‡ä½œè€…ï¼šMichael Chan\næœ¬æ–‡é“¾æ¥ï¼šhttp://michaelchan90.github.io/2023/02/25/MySQL%E5%A4%87%E4%BB%BD%E4%B9%8Bercona-xtrabackup/\nç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é»˜è®¤é‡‡ç”¨ CC BY-NC-SA 4.0 è®¸å¯åè®®ã€‚');
  }
});</script></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2023/02/27/Redis7.0%E5%AE%89%E8%A3%85/" rel="prev" title="Redis7.0å®‰è£…"><span class="icon iconify" data-icon="ri:arrow-left-s-line"></span><span class="post-nav-text">Redis7.0å®‰è£…</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2023/02/17/Log4j%E4%B8%8ELog4j2%E6%97%A5%E5%BF%97%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/" rel="next" title="Log4jä¸Log4j2æ—¥å¿—é…ç½®è¯¦è§£"><span class="post-nav-text">Log4jä¸Log4j2æ—¥å¿—é…ç½®è¯¦è§£</span><span class="icon iconify" data-icon="ri:arrow-right-s-line"></span></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>è‹¥æ‚¨æƒ³åŠæ—¶å¾—åˆ°å›å¤æé†’ï¼Œå»ºè®®è·³è½¬ GitHub Issues è¯„è®ºã€‚</span><br></div></div></main><footer class="sidebar-translate" id="footer"><div class="beian"><a rel="noopener" href="https://beian.miit.gov.cn/" target="_blank">äº¬ICPå¤‡xxxxxxxxå·</a></div><div class="copyright"><span>&copy; 2023 </span><span class="with-love" id="animate" title="æ˜Ÿæ— å°˜çš„èµåŠ©è€…"><span class="icon iconify" data-icon="ri:cloud-line"></span></span><span class="author"> Michael Chan</span></div><div class="live-time"><span>æœ¬åšå®¢å·²èŒèŒå“’åœ°è¿è¡Œ</span><span id="display_live_time"></span><span class="moe-text">(â—'â—¡'â—)</span><script>function blog_live_time() {
  setTimeout(blog_live_time, 1000);
  const start = new Date('2023-01-01T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = ` ${passDay} å¤© ${passHour} å°æ—¶ ${passMinute} åˆ† ${passSecond} ç§’`;
}
blog_live_time();
</script></div><div id="busuanzi"><span id="busuanzi_container_site_uv" title="æ€»è®¿å®¢é‡"><span><span class="icon iconify" data-icon="ri:user-line"></span></span><span id="busuanzi_value_site_uv"></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv" title="æ€»è®¿é—®é‡"><span><span class="icon iconify" data-icon="ri:eye-line"></span></span><span id="busuanzi_value_site_pv"></span></span><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></footer></div><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><span class="icon iconify" data-icon="ri:arrow-up-s-line"></span><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="æœç´¢"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:search-line"></span></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="https://fastly.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js"></script><script src="/js/search/local-search.js" defer type="module"></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><span class="icon iconify" data-icon="ri:close-line"></span></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="æœç´¢..." value=""></div><div class="search-result-container"></div></div><script>function initMourn() {
  const date = new Date();
  const today = (date.getMonth() + 1) + "-" + date.getDate()
  const mourn_days = ["4-4","9-18","12-13"]
  if (mourn_days.includes(today)) {
    document.documentElement.style.filter = "grayscale(1)";
  }
}
initMourn();</script></body></html>